## 怎样使用Angular 1.x开发一个全组件化的应用

很多其他框架的使用者对Angular 1.x有过一些质疑，比如说“不组件化”，其实每个框架有自己的组件化理念，也存在着独具一格的组件化实践。

Angular官方没有提供一些比较好的范例，对组件化的约定也很松散，但这是优势而不是劣势，这意味着，你可以把一些有公共性的东西用1.4之前版本的directive，或者1.5版本引入的components封装起来，也可以把另外一些灵活的东西直接使用ng-include或者route的template，愿意怎么做，完全取决于业务本身和你自己。

在控制台这样的一个应用中，我们可以这样看：

整个应用下，可以分成这样三块东西：

- 顶部导航相关
- 左侧菜单
- 主功能区域

每块东西可以视为一个组件，其中，顶部导航和左侧菜单是全应用共享的，而主功能区域需要结合路由，在不同url下，渲染为不同的功能界面。

对于整个项目的组件化，建议如下：

先考虑业务代码的复用性是什么类型的。是单独的逻辑有复用性吗？是单独的界面交互有复用性吗？是数据和逻辑的整体有复用性吗？在一个有一定规模的项目中，这些都可能存在，也都可以被用不同方式提供。

- 如果单独的逻辑有复用性，做成service
- 如果单独的界面交互有复用性，做成directive，比如常见的一些“控件”
- 其他一些附加功能，比如filter之类，适当提取

如果是带业务特性的一块界面，连同其逻辑，也可以做成directive。在这里面，还可以有一些策略，比如把这些组件也设计为多级可复用的：

- 一个controller可以被多个不同的html模板使用，展示成同一业务的不同形态。（注意这里不要过于追求controller的复用性，能搞就搞，不能就果断分成多个）
- 一个组件可以由可复用的controller，自身的template，依赖的service，filter之类联合构成

在这些之前，还要先把数据部分规划一下，还有可能的消息传递。